window.PaymentGateway=class{constructor(e){this.options=e||{},this.modalId="payment-gateway-modal",this.iframeId="payment-iframe",this.options.key||console.error('PaymentGateway: "key" is required.')}open(){if(document.getElementById(this.modalId))return;const e=document.createElement("div");e.id=this.modalId,e.dataset.testId="payment-modal",Object.assign(e.style,{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:"9999"});const t=document.createElement("div");t.className="modal-content",Object.assign(t.style,{position:"relative",width:"400px",height:"600px",backgroundColor:"white",borderRadius:"8px",overflow:"hidden",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"});const o=document.createElement("button");o.innerText="Ã—",o.dataset.testId="close-modal-button",o.className="close-button",Object.assign(o.style,{position:"absolute",top:"10px",right:"15px",background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#333",zIndex:"10"}),o.onclick=()=>this.close();const s=document.createElement("iframe");s.dataset.testId="payment-iframe";const n=new URLSearchParams({order_id:this.options.orderId||"",key:this.options.key||"",embedded:"true"});s.src=`http://localhost:3001/checkout?${n.toString()}`,Object.assign(s.style,{width:"100%",height:"100%",border:"none"}),t.appendChild(o),t.appendChild(s),e.appendChild(t),document.body.appendChild(e),window.addEventListener("message",this.handleMessage.bind(this))}close(){const e=document.getElementById(this.modalId);e&&e.remove(),window.removeEventListener("message",this.handleMessage.bind(this)),this.options.onClose&&this.options.onClose()}handleMessage(e){const{type:t,data:o}=e.data;"payment_success"===t?(this.options.onSuccess&&this.options.onSuccess(o),this.close()):"payment_failed"===t?this.options.onFailure&&this.options.onFailure(o):"close_modal"===t&&this.close()}};